SET LINES 150 PAGES 5000 TIMING ON ECHO ON
COL TOTAL_SGA FOR A20
COL USEED FOR A20
COL FREE FOR A20
SELECT
ROUND(SUM(BYTES)/1024/1024,2)||' MB' TOTAL_SGA,
ROUND(ROUND(SUM(BYTES)/1024/1024,2)-ROUND(SUM(DECODE(NAME,'free memory',BYTES,0))/1024/1024,2))||' MB' USED,
ROUND(SUM(DECODE(NAME,'free memory',BYTES,0))/1024/1024,2)||' MB' FREE,
ROUND(100*(ROUND(ROUND(SUM(BYTES)/1024/1024,2)-ROUND(SUM(DECODE(NAME,'free memory',BYTES,0))/1024/1024,2))/ROUND(SUM(BYTES)/1024/1024,2))) ||' %' PERCENTAGE_USED
FROM V$SGASTAT;
